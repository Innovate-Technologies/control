<h2 class="page-header">
    <span class="pull-left"><fa name="sliders"></fa> Manage #{{service.id}} <small>#NowPlaying</small></span>
    <span class="pull-right"><a class="back-to-services-link text-muted" href="/manage">Back</a></span>
    <div class="clearfix"></div>
</h2>

<form class="form-horizontal" novalidate role="form" name="form" ng-submit="submitSettings(settings)" ng-hide="unauthorised">
    <fieldset ng-disabled="submitting">
        <div class="panel panel-default">
            <div class="panel-heading">
                <div class="pull-left">
                    <h4>#NowPlaying Tweets</h4>
                </div>
                <div class="pull-right">
                    <div toggle-switch ng-disabled="submitting || form.$invalid" class="switch-success switch-large" ng-model="nowPlayingState" on-label="Enabled" off-label="Disabled"></div>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="panel-body">
                <div id="alert-now-playing-box" flash-alert active-class="in alert" class="animated-custom fade">
                    <p class="alert-message"><i class="fa alert-icon-{{flash.type}}"></i> {{ flash.message }}</p>
                </div>
                <div class="alert alert-warning" ng-show="form.$invalid">
                    <p><fa name="warning"></fa> You need to configure #NowPlaying before it can be enabled.</p>
                </div>
                <p>#NowPlaying is a free service that automatically posts your now playing information to Twitter. It allows your listeners to know what you're currently playing and artists to interact with you, directly on Twitter!</p>
                <p>We recommend enabling it with an interval between 5 and 10.</p>
                <br>
                <legend>
                    <div class="h4">
                        <fa name="cogs"></fa> Settings
                    </div>
                </legend>
                <div class="well">
                    <p>Here's what a #NowPlaying Tweet currently looks like:</p>
                    <blockquote class="no-margin-bottom">
                        <p>{{settings.prefix}} Song Name - Artist Name {{settings.suffix}}</p>
                        <small>@yourtwitterhandle (preview)</small>
                    </blockquote>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group" show-errors>
                            <label for="prefix" class="col-sm-2 control-label">Prefix</label>
                            <div class="col-sm-10">
                                <input type="text" id="prefix" class="form-control" placeholder="This is added before the Tweet's content." ng-model="settings.prefix" name="prefix" required>
                                <p class="help-block">This is often used for adding hashtags such as #NowPlaying.</p>
                            </div>
                        </div>
                        <div class="form-group" show-errors>
                            <label for="suffix" class="col-sm-2 control-label">Suffix</label>
                            <div class="col-sm-10">
                                <input type="text" id="suffix" class="form-control" placeholder="This is added after the Tweet's content (optional)." ng-model="settings.suffix" name="suffix">
                            </div>
                        </div>
                        <div class="form-group" show-errors ng-class="{'has-warning': (settings.interval === 1)}">
                            <label for="interval" class="col-sm-2 control-label">Interval</label>
                            <div class="col-sm-10">
                                <input type="number" id="interval" step="1" min="1" placeholder="Interval" class="form-control" ng-model="settings.interval" name="interval" required>
                                <p class="help-block">#NowPlaying Tweets will be sent every {{settings.interval}} song<span ng-show="settings.interval > 1">s</span>.<span ng-show="settings.interval === 1"><br>We don't recommend this if the songs aren't very long.</span></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group" show-errors>
                            <label for="consumer-key" class="col-sm-4 control-label">Consumer Key</label>
                            <div class="col-sm-8">
                                <input type="text" id="consumer-key" placeholder="Consumer Key" class="form-control" ng-model="settings.consumerKey" name="consumer-key" required>
                            </div>
                        </div>
                        <div class="form-group" show-errors>
                            <label for="consumer-secret" class="col-sm-4 control-label">Consumer Secret</label>
                            <div class="col-sm-8">
                                <input type="text" id="consumer-secret" placeholder="Consumer Secret" class="form-control" ng-model="settings.consumerSecret" name="consumer-secret" required>
                            </div>
                        </div>
                        <div class="form-group" show-errors>
                            <label for="access-token" class="col-sm-4 control-label">Access Token</label>
                            <div class="col-sm-8">
                                <input type="text" id="access-token" placeholder="Access Token" class="form-control" ng-model="settings.accessToken" name="access-token" required>
                            </div>
                        </div>
                        <div class="form-group" show-errors>
                            <label for="access-token-secret" class="col-sm-4 control-label">Access Token Secret</label>
                            <div class="col-sm-8">
                                <input type="text" id="access-token-secret" placeholder="Access Token Secret" class="form-control" ng-model="settings.accessTokenSecret" name="access-token-secret" required>
                                <p class="help-block">Need help for getting this? <a href="https://community.shoutca.st/topic/56/nowplaying-how-to-generate-your-api-keys">Click here.</a></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <button type="submit" class="btn btn-block btn-primary"><fa name="save"></fa> Save settings</button>
                    </div>
                    <div class="col-sm-6">
                        <button type="button" class="btn btn-danger btn-block" ng-click="removeSettings()"><fa name="trash-o"></fa> Remove settings</button>
                    </div>
                </div>
                <br>
            </div>
        </div>
    </fieldset>
</form>
